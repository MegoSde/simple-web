/* ===== Core Reset (lean) ===== */
*, *::before, *::after { box-sizing: border-box; }
* { margin: 0; }
html, body { height: 100%; }
body { line-height: 1.5; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; }
img, picture, video, canvas, svg { display: block; max-width: 100%; }
input, button, textarea, select { font: inherit; }
a { color: inherit; text-decoration: underline; text-underline-offset: 2px; }
ul, ol { padding-left: 1.25rem; }
table { border-collapse: collapse; border-spacing: 0; }

/* ===== System Font Stack ===== */
:root {
    --font-system: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue",
    Arial, "Noto Sans", "Liberation Sans", "Apple Color Emoji",
    "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
    --header-h: 75px;

    color-scheme: light dark; /* respekter OS-tema */
    --bg: Canvas;
    --fg: CanvasText;
    --border: color-mix(in oklab, var(--fg) 18%, transparent);

    /* Accent = CTA (BLUE). */
    --accent: oklch(62% 0.18 240);         /* blue */
    --accent-contrast: white;
    --accent-hover: oklch(56% 0.18 240);

    /* Success (grøn nuance til badges etc., valgfri) */
    --success: oklch(62% 0.13 150);

    /* Danger (rød til fejl) */
    --danger: oklch(55% 0.20 25);
    --danger-bg: color-mix(in oklab, var(--danger) 20%, var(--bg));
    --danger-border: color-mix(in oklab, var(--danger) 55%, transparent);

    /* nav */
    --nav-w-expanded: 160px;
    --nav-w-collapsed: 64px;
    --nav-w: var(--nav-w-expanded);
    --nav-h: 56px; /* bundmenu-højde på små skærme */
}

@media (prefers-color-scheme: dark) {
    :root {
        /* Lidt lysere accenter i dark mode for bedre kontrast */
        --accent: oklch(45% 0.26 241);
        --accent-hover: oklch(50% 0.26 241);
        --success: oklch(70% 0.12 150);
        --danger: oklch(70% 0.17 25);
        --danger-bg: color-mix(in oklab, var(--danger) 22%, var(--bg));
        --danger-border: color-mix(in oklab, var(--danger) 60%, transparent);
    }
}



body {
    font-family: var(--font-system), sans-serif;
    font-size: 16px;
    background: Canvas;
    color: CanvasText;
}



/* ===== Utilities ===== */
.container { max-width: 960px; margin-inline: auto; padding: 1rem; }
button, .btn {
    display: inline-flex; align-items: center; gap: .4rem;
    text-decoration: none;
    padding: .5rem .8rem; border-radius: .5rem; border: 1px solid color-mix(in oklab, CanvasText 20%, transparent);
    background: color-mix(in oklab, Canvas 90%, CanvasText 10%);
    cursor: pointer;
}
.btn.btn-sm { padding: .1rem .4rem; }
button:hover, .btn:hover { background: color-mix(in oklab, Canvas 85%, CanvasText 15%); }
:focus-visible { outline: 2px solid Highlight; outline-offset: 2px; }

.center-page {
    min-block-size: calc(100svh - var(--header-h) - 2rem);
    display: grid;
    place-items: center;
    padding: 1rem;
}

/* ===== Page Chrome ===== */
#header {
    min-block-size: var(--header-h);
    padding: 1rem; 
    border-bottom: 1px solid color-mix(in oklab, CanvasText 15%, transparent); 
    display:flex; 
    gap:1rem; 
    align-items:center; 
}

#title { font-size: 1.75em; }

#user {
    margin-inline-start: auto;
    display: inline-flex;
    align-items: center;
    gap: .5rem;
}
/* nav */

#main-nav {
    position: fixed;
    inset: var(--header-h) auto 0 0; /* top = header-h, left 0, bottom 0 */
    width: var(--nav-w);
    border-right: 1px solid var(--border);
    background: var(--bg);
}

main { margin-left: var(--nav-w); } /* plads til sidebar */

@media (min-width: 769px) and (max-width: 1024px) {
    #main-nav {
        width: var(--nav-w-collapsed);
    }
    #main-nav a span { display: none;}
    main { margin-left: var(--nav-w-collapsed) } /* undgå overlap */
}

/* Mobil bundmenu (<900px) */
@media (max-width: 768px) {
    #main-nav {
        position: fixed;
        inset: auto 0 0 0;  /* fast nederst */
        height: var(--nav-h);
        border-top: 1px solid var(--border);
        border-right: none;
        background: var(--bg);
        width: 100%;
    }
    main { padding-bottom: calc(var(--nav-h) + 1rem); margin-left: 0;} /* undgå overlap */
}

#main-nav > div {
    display: flex;
    flex-direction: column;
    height: 100%;
}

#main-nav ul {
    list-style: none;
    margin: 0; padding: .5rem;
    display: grid;
    gap: .25rem;
}

/* Link */
#main-nav a {
    display: flex;
    align-items: center;
    gap: .75rem;
    padding: .5rem .75rem;
    border-radius: .5rem;
    text-decoration: none;
    color: inherit;
}
#main-nav a:hover { background: color-mix(in oklab, var(--fg) 8%, transparent); }
#main-nav a.is-active {
    background: color-mix(in oklab, var(--fg) 12%, transparent);
    font-weight: 600;
}

/* Ikon + label */
#main-nav svg { inline-size: 24px; block-size: 24px; flex: 0 0 24px; color: var(--fg); }
#main-nav span { white-space: nowrap; }

/* Mobil: række med center-ikoner */
@media (max-width: 768px) {
    #main-nav > div { flex-direction: row; align-items: center; justify-content: space-around; }
    #main-nav ul { grid-auto-flow: column; gap: .5rem; padding: .25rem .5rem; width: 100%; }
}


/* main */
main { padding: 1rem; }

.login {
    width: 100%;
    max-width: 360px;
    padding: 1rem 1.25rem;
    border: 1px solid var(--border);
    border-radius: .75rem;
    box-shadow: 0 1px 2px color-mix(in oklab, var(--fg) 15%, transparent);
    background: var(--bg);
    color: var(--fg);
}

.login h1 { font-size: 1.25rem; margin-bottom: .5rem; }

fieldset { margin-top: .75rem; display: grid; gap: .25rem; border: none; padding: 0; }
fieldset.action { margin-top: 1rem; display: flex; justify-content: flex-end; gap: .5rem; }

.error {
    border: 1px solid var(--danger-border);
    background: var(--danger-bg);
    color: var(--fg);
    margin-top: .5rem; padding: .5rem; border-radius: .5rem;
}

.actions { margin-top: 1rem; display: flex; justify-content: flex-end; gap: .5rem; }

.actions button[type="submit"], .actions .btn {
    background: var(--accent);
    color: var(--accent-contrast);
    border: 1px solid color-mix(in oklab, var(--accent) 55%, transparent);
    border-radius: .5rem;
}
.actions button[type="submit"]:hover, .actions .btn:hover {
    background: var(--accent-hover);
}

td, th {
    padding-right: 0.5rem;
    text-align: left;
}

.page-titlebar{
    display:flex; align-items:center; justify-content:space-between;
    gap:1rem; flex-wrap:wrap; margin-block:.5rem 1rem;
}
.page-titlebar .actionbar{ display:inline-flex; align-items:center; gap:.5rem; }

.icon{
    width:1em; height:1em;
    stroke:currentColor; fill:none; stroke-width:2;
    stroke-linecap:round; stroke-linejoin:round;
    vertical-align:-0.125em;
}

a.card { text-decoration: none; }
nav.pager { display: flex; justify-content: center; align-items: center; gap: 1rem; }
span.btn { color: darkgray; cursor: default; }

.backlink{
    display:inline-flex; align-items:center; gap:.4rem;
    font-size:.9rem; font-weight:500;
    color:#666; text-decoration:none;
    margin-block:.25rem .25rem;  /* lidt luft over/under */
}
.backlink:hover{ color: var(--accent-hover);; text-decoration:underline; }
.backlink:focus{ outline:2px solid #000; outline-offset:2px; border-radius:.25rem; }

.backlink .icon{
    width:1em; height:1em;
    stroke:currentColor; fill:none; stroke-width:2;
    stroke-linecap:round; stroke-linejoin:round;
    vertical-align:-0.1em;
}
.crop-wrap { position: relative; display: inline-block; max-width: 100%; }
.crop-img { max-width: 100%; display: block; }
.crop-rect { position:absolute; border:2px solid #00d; background: rgba(0,128,255,.15); cursor: move; }
.handle { position:absolute; width:12px; height:12px; background:#00d; right:-6px; bottom:-6px; cursor: nwse-resize; }
.preset-pill { margin: 0 .5rem .5rem 0; display:inline-block; }
.preset-pill.selected { background:#0d6efd; color:#fff; border-color:#0d6efd; }
.ratio-pill { margin: 0 .5rem .5rem 0; }
.ratio-pill.active { background:#6c757d; color:#fff; }
.table-action { display:inline-flex; align-items:center; gap:.4rem; }

.component { border:1px solid #e5e7eb; border-radius:.5rem; margin:.5rem 0; background: field; }
.component__head { display:flex; align-items:center; gap:.75rem; padding:.5rem .75rem; border-bottom:1px solid #f1f5f9; }
.component__icon img { width:256px; display:block; }
.component__title { font-weight:600; flex:1; color:#fff; }
.component__controls { display:flex; gap:.25rem; }
.btn.btn--icon { width:32px; height:32px; display:inline-grid; place-items:center; border:1px solid #e5e7eb; border-radius:.375rem; background:#000; color: #fff; padding: 0; }
.btn.btn--icon:hover { border-color:#cbd5e1; }
.btn.btn--icon svg { width:32px; height:32px; color: #fff;}
.component__body { padding:.75rem; }
.component--error { border-color: #ef4444; }
.component__errors { color: #b91c1c; font-size: .875rem; margin-left: auto; }
.component__error + .component__error { margin-top: .25rem; }


/* Dialog: fyld hele viewport minus 1rem kant */
.dlg {
    width: calc(100vw - 2rem);
    height: calc(100vh - 2rem);
    margin: 1rem;                 /* luft hele vejen rundt */
    padding: 0;
    border: none;
    border-radius: .5rem;
    box-shadow: 0 10px 30px rgba(0,0,0,.25);
    background: #fff;
    color: #111;
    overflow: hidden;             /* indholdet scroller i panel, ikke selve dialogen */
}

/* Backdrop (ved showModal) */
.dlg::backdrop {
    background: rgba(0,0,0,.4);
    backdrop-filter: blur(2px);
}

/* Fallback hvis showModal ikke findes: .is-open simulerer modal overlay */
.dlg.is-open {
    position: fixed;
    inset: 1rem;
    z-index: 1000;
}
.dlg.is-open::before { /* overlay */
    content: "";
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.4);
    backdrop-filter: blur(2px);
    z-index: -1;
}

/* Panel med flexlayout – header / tools / grid / footer */
.dlg__panel {
    display: flex;
    flex-direction: column;
    height: 100%;
}

/* Header / footer */
.dlg__head, .dlg__foot {
    padding: .75rem 1rem;
    border-bottom: 1px solid #e5e7eb;
}
.dlg__foot { border-top: 1px solid #e5e7eb; border-bottom: 0; margin-top: auto; }

.dlg__head {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: .5rem;
    font-weight: 600;
}

.dlg__close {
    appearance: none;
    border: 0;
    background: transparent;
    font-size: 1.25rem;
    line-height: 1;
    cursor: pointer;
    color: #6b7280;
}
.dlg__close:hover { color: #111; }

/* Tools (søgefelt) */
.dlg__tools {
    padding: .75rem 1rem;
    border-bottom: 1px solid #f3f4f6;
}
.dlg__search {
    width: 100%;
    padding: .5rem .75rem;
    border: 1px solid #e5e7eb;
    border-radius: .375rem;
    font: inherit;
}

/* Grid med billeder – scroller */
.dlg__grid {
    padding: 1rem;
    flex: 1 1 auto;
    overflow: auto;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: .75rem;
    background: #fafafa;
}

/* Thumb-kort */
.dlg__thumb {
    appearance: none;
    border: 1px solid #e5e7eb;
    background: #fff;
    padding: .5rem;
    border-radius: .375rem;
    cursor: pointer;
    text-align: left;
    display: grid;
    gap: .5rem;
}
.dlg__thumb:hover { border-color: #cbd5e1; box-shadow: 0 2px 6px rgba(0,0,0,.06); }

.dlg__thumb img {
    display: block;
    width: 100%;
    border-radius: .25rem;
}
.dlg__meta {
    font-size: .75rem;
    color: #6b7280;
}

.tbl { width:100%; border-collapse:collapse; font-size:14px; }
.tbl th, .tbl td { padding:8px 10px; border-bottom:1px solid #eee; vertical-align:middle; }
.status-dot { width:10px; height:10px; border-radius:50%; display:inline-block; }
.status-green { background:#1a7f37; }
.status-yellow { background:#f59e0b; }
.status-red { background:#dc2626; }
.path { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; color:#ccc; }
.muted { color:#ccc; }
.legend { display:flex; gap:16px; align-items:center; margin:.25rem 0 1rem; }
.legend-item { display:flex; gap:6px; align-items:center; font-size:12px; color:#6b7280; }
.ico { width:16px; height:16px; vertical-align:-2px; }

/* (Valgfrit) mørk tilpasning */
@media (prefers-color-scheme: dark) {
    .dlg { background: #111; color: #e5e7eb; box-shadow: 0 10px 30px rgba(0,0,0,.6); }
    .dlg__grid { background: #0a0a0a; }
    .dlg__head, .dlg__foot { border-color: #1f2937; }
    .dlg__tools { border-color: #1f2937; }
    .dlg__search { border-color: #374151; background: #0f172a; color: #e5e7eb; }
    .dlg__thumb { border-color: #1f2937; background: #0b0f1a; }
    .dlg__thumb:hover { border-color: #334155; box-shadow: 0 2px 6px rgba(0,0,0,.35); }
    .dlg__meta { color: #94a3b8; }
}

/* (Valgfrit) reducerede animationer */
@media (prefers-reduced-motion: reduce) {
    .dlg, .dlg__thumb { transition: none !important; }
}
